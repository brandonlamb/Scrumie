<style>
    .dialog {display: none;}
    input.text {width: 180px;}
</style>
<div id="loginDialog" class="dialog">
    <form id="loginForm" onsubmit="return false;">
    <table>
    <tr><td>Login:</td><td><input class="text" name="login" type="text"/></td></tr>
    <tr><td>Password:</td><td><input class="text" name="password" type="password"/></td></tr>
    <tr><td></td><td style="text-align: right"><input type="submit"/></td></tr>
    </table>
    <a href="javascript: showRegistryDialog();">Registry</a>
    ::
    <a href="?controller=User&action=forgotPassword">Forgot </a>
    </form>
</div>

<div id="registryDialog" class="dialog">
    <form id="registryForm" onsubmit="return false;">
        <table>
            <tr><td>Login:</td><td><input class="text" name="login" type="text"/></td></tr>
            <tr><td>Password:</td><td><input class="text" name="password" type="password"/></td></tr>
            <tr><td>Repeat&nbsp;pwd:</td><td><input class="text" name="password2" type="password"/></td></tr>
            <tr><td></td><td style="text-align: right"><input type="submit"/></td></tr>
        </table>
    </form>
</div>
<script>
    $(function() {
        showLoginDialog();

        $('div#registryDialog input[type|="submit"]').click(function() {
            var formData = $('form#registryForm').serializeArray();
            $.post('?controller=User&action=registry', formData, function(data, textStatus, Request) {
                if(data === true)
                    location.href = '?controller=Index';
                else
                    alert(data);
            });
        });

        $('div#loginDialog input[type|="submit"]').click(function() {
            var formData = $('form#loginForm').serializeArray();
            $.post('?controller=User&action=login', formData, function(data, textStatus, Request) {
                if(data === true)
                    location.href = '?controller=Board';
                else
                    alert('Authorization failed');
            });
        });
    });

function showLoginDialog() {

    loginDialog = $( "#loginDialog" ).dialog({
        title: 'Login',
        closeOnEscape: false,
        draggable: false,
        resizable: false,
    });
}

function showRegistryDialog() {
    $( "#registryDialog" ).dialog({
        title: 'Registry',
        closeOnEscape: false,
        draggable: false,
        resizable: false,
    });
}
</script>
