<style>
    .dialog {display: none;}
    input.text {width: 180px;}
</style>
<center>
<div id="loginDialog" class="dialog">
    <form id="loginForm" onsubmit="return false;">
    <table>
    <tr><td>Project:</td><td><input class="text" name="name" type="text"/></td></tr>
    <tr><td>Password:</td><td><input class="text" name="password" type="password"/></td></tr>
    <tr><td></td><td style="text-align: right"><input type="submit" value="Go!" /></td></tr>
    </table>
    <a href="javascript: showRegistryDialog();">+ New project</a> 
    <br/><small>You can also login to demo project as demo:demo</small>

    </form>

    <div style="margin-top: 10px; padding: 5px; background: #ddd; text-align: center">
        <h1>Scrumie</h1>
        <p>Copyright &copy; 2010 <a href="http://nowicki.cjb.net">Roman Nowicki</a></p>
        <small><a href="https://download.github.com/nigro-Scrumie-a87ebe7.tar.gz">Download source</a></small>
        <p>
        <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
        <input type="hidden" name="cmd" value="_s-xclick">
        <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----MIIHJwYJKoZIhvcNAQcEoIIHGDCCBxQCAQExggEwMIIBLAIBADCBlDCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20CAQAwDQYJKoZIhvcNAQEBBQAEgYByGzFnNAgFESoLgXXYrdd+PRFFfbw/DEtbThvtnYMHMToS34j4sZaoFJtymCfR19Iu934GJ0UuZccouzVVh7zSFRRjLCBXHJr1G/Z7uD7liinvKN6W6Rf+0O0XPhV44SQ4lo6xX7mv0MbPRGe49S/3JynrFS+mWa8pf902N7Jy7TELMAkGBSsOAwIaBQAwgaQGCSqGSIb3DQEHATAUBggqhkiG9w0DBwQI/4A0XJ5j1qSAgYCOO/tUFNNBhMiuTkCRP4JKwnfBT2xfQ8sXIez8m20DZZkl8O9riypi6MZTWmkT6ue9SkH0GQ9lgaoTtea1i+vYtH6v1gCWKqqJvX+Asszb6nEEGIsM0jYgwscOCw0/iXjslG3DkTHsUoTwe9sbgyT2iOtZwONwDvtEEaDaa3rU8aCCA4cwggODMIIC7KADAgECAgEAMA0GCSqGSIb3DQEBBQUAMIGOMQswCQYDVQQGEwJVUzELMAkGA1UECBMCQ0ExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC1BheVBhbCBJbmMuMRMwEQYDVQQLFApsaXZlX2NlcnRzMREwDwYDVQQDFAhsaXZlX2FwaTEcMBoGCSqGSIb3DQEJARYNcmVAcGF5cGFsLmNvbTAeFw0wNDAyMTMxMDEzMTVaFw0zNTAyMTMxMDEzMTVaMIGOMQswCQYDVQQGEwJVUzELMAkGA1UECBMCQ0ExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC1BheVBhbCBJbmMuMRMwEQYDVQQLFApsaXZlX2NlcnRzMREwDwYDVQQDFAhsaXZlX2FwaTEcMBoGCSqGSIb3DQEJARYNcmVAcGF5cGFsLmNvbTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAwUdO3fxEzEtcnI7ZKZL412XvZPugoni7i7D7prCe0AtaHTc97CYgm7NsAtJyxNLixmhLV8pyIEaiHXWAh8fPKW+R017+EmXrr9EaquPmsVvTywAAE1PMNOKqo2kl4Gxiz9zZqIajOm1fZGWcGS0f5JQ2kBqNbvbg2/Za+GJ/qwUCAwEAAaOB7jCB6zAdBgNVHQ4EFgQUlp98u8ZvF71ZP1LXChvsENZklGswgbsGA1UdIwSBszCBsIAUlp98u8ZvF71ZP1LXChvsENZklGuhgZSkgZEwgY4xCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJDQTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLUGF5UGFsIEluYy4xEzARBgNVBAsUCmxpdmVfY2VydHMxETAPBgNVBAMUCGxpdmVfYXBpMRwwGgYJKoZIhvcNAQkBFg1yZUBwYXlwYWwuY29tggEAMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQEFBQADgYEAgV86VpqAWuXvX6Oro4qJ1tYVIT5DgWpE692Ag422H7yRIr/9j/iKG4Thia/Oflx4TdL+IFJBAyPK9v6zZNZtBgPBynXb048hsP16l2vi0k5Q2JKiPDsEfBhGI+HnxLXEaUWAcVfCsQFvd2A1sxRr67ip5y2wwBelUecP3AjJ+YcxggGaMIIBlgIBATCBlDCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20CAQAwCQYFKw4DAhoFAKBdMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTExMDEwNjIzMzE1MlowIwYJKoZIhvcNAQkEMRYEFHN9CuqufQOOw2D+tkWsggZ7H1pxMA0GCSqGSIb3DQEBAQUABIGAb9Utd6UIIbtKWFhdrsR5PgfasGTmSjRF+a/tRL9A6p1p3xSJYwZ/18+C5+Ss0y8WI6m08UNebqgURajik2t/T11hWiQwZVb9RaMdqeNjU8hLN8lQYO830yJo4YSjQit4qGTc5q8bOVSj+vwgCFRiFqfmSyRWOfG6xkt1aj9oMMQ=-----END PKCS7-----
        ">
        <input type="image" src="https://www.paypal.com/en_GB/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online.">
        <img alt="" border="0" src="https://www.paypal.com/pl_PL/i/scr/pixel.gif" width="1" height="1">
        </form>
        </p>
    </div>
</div>

<div id="registryDialog" class="dialog">
    <form id="registryForm" onsubmit="return false;">
        <table>
            <tr><td>Name:</td><td><input class="text" name="name" type="text"/></td></tr>
            <tr><td>Password:</td><td><input class="text" name="password" type="password"/></td></tr>
            <tr><td>Repeat&nbsp;pwd:</td><td><input class="text" name="password2" type="password"/></td></tr>
            <tr><td></td><td style="text-align: right"><input type="submit" value="Create" /></td></tr>
        </table>
    </form>
</div>
</center>


<script>
$(document).ready(function() {
    showLoginDialog();

    $('div#registryDialog input[type|="submit"]').click(function() {
        var formData = $('form#registryForm').serializeArray();
        $.post('?controller=Project&action=registry', formData, function(data, textStatus, Request) {
            if(isset(data.error)) {
                alert(data.error)
            }
            else
                location.href = '?controller=Index';
        });
    });

    $('div#loginDialog input[type|="submit"]').click(function() {
        var formData = $('form#loginForm').serializeArray();
        $.post('?controller=Project&action=login', formData, function(data, textStatus, Request) {
            if(data === true)
                location.href = '?controller=Board';
            else
                alert('Authorization failed');
        });
    });
});

function showLoginDialog() {

    loginDialog = $( "#loginDialog" ).dialog({
        title: 'Login',
        closeOnEscape: false,
        draggable: false,
        resizable: false,
    });
}

function showRegistryDialog() {
    $( "#registryDialog" ).dialog({
        title: 'New project',
        closeOnEscape: true,
        draggable: false,
        resizable: false,
    });
}
</script>
